<div class="container">

<div class="row">
  <div class="col-xs-9">
        <div class="input-group">
        <input  [(ngModel)]="searchText"
                (keyup)="delayedSearchInstanceVariables(searchText)"
                placeholder="{{ 'catalog.searchInstanceVariable.searchForVariables' | translate }}"
                type="text"
                class="form-control">
        <span class="input-group-btn">
        <button class="btn btn-default" 
                (click)="delayedSearchInstanceVariables(searchText)">
            <span class="glyphicon glyphicon-search"></span>
        </button>
        </span>
      </div>
  </div>  
</div>

  <div class="row">
    <div class="col-xs-12 col-sm-9">
      <ng-container *ngIf="searchInProgress">
        <thl-spinner></thl-spinner>
      </ng-container>

      <ng-container *ngIf="instanceVariables && (!searchInProgress || searchingMoreResults)">
        <div class="search-results-summary">
          <span>{{'catalog.searchInstanceVariable.searchSummary' | translate:{resultCount: instanceVariables.length} | uppercase}} "{{latestLookupTerm}}"</span>
        </div>
        <div *ngIf="instanceVariables.length" class="search-results-container">
          <ng-container *ngFor="let variable of instanceVariables;let isLastResult=last">
            <instance-variable-search-result [instanceVariable]="variable"></instance-variable-search-result>
            <ng-container *ngIf="!isLastResult">
              <hr>
            </ng-container>
          </ng-container>
        </div>
      </ng-container>
    </div>

    <div class="col-xs-12 col-sm-3 variable-side">
      <ng-container *ngIf="variables && variables.length && (!searchInProgress || searchingMoreResults)">
          <h3>{{'variables' | translate}}</h3>
          <a *ngFor="let variable of variables" routerLink="/catalog/variables/{{variable.id}}">
            <div class="variable-label-side">
              {{variable.prefLabel | lang}}
            </div>
          </a>
      </ng-container>
    </div>
  </div>
  <div class="row">
    <div class="col-xs-12 show-more-results" *ngIf="instanceVariables 
     && instanceVariables.length && instanceVariables.length >= maxResults">
        <ng-container *ngIf="!searchInProgress && !searchingMoreResults">
          <button class="btn btn-sm btn-default" (click)="loadMoreResults()">
            {{ 'loadMoreResults' | translate }}
          </button>
      </ng-container>
      <ng-container *ngIf="searchingMoreResults">
        <thl-spinner></thl-spinner>
      </ng-container>
    </div>
  </div>
</div>
